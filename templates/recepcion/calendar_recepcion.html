{% extends 'base_recepcion.html' %}
{% load static %}

{% block title %} Dashboard Recepción {% endblock title %}

{% block additional_headers %}
    <link href='https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css' rel='stylesheet'>
    <link href='https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css' rel='stylesheet'>
    <script src='https://cdn.jsdelivr.net/npm/fullcalendar/index.global.min.js'></script>
    <script src="https://cdn.jsdelivr.net/npm/@fullcalendar/bootstrap5@6.1.19/index.global.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@fullcalendar/interaction@6.1.19/index.global.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@fullcalendar/daygrid@6.1.19/index.global.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@fullcalendar/timegrid@6.1.19/index.global.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@fullcalendar/list@6.1.19/index.global.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@fullcalendar/multimonth@6.1.19/index.global.min.js"></script>


    <script>

        events = [];
        {% for event in eventos %}
            events.push({
                title: '{{ event.title }}',
                start: '{{ event.start }}',
                end: '{{ event.end }}',
            });
        {% endfor %}
        console.log(events);

        document.addEventListener('DOMContentLoaded', function() {
            const calendarEl = document.getElementById('calendar');
            const calendar = new FullCalendar.Calendar(calendarEl, {
                initialView: 'dayGridMonth',
                themeSystem: 'bootstrap5',
                headerToolbar: {
                    left: 'prev,next today',
                    center: 'title',
                    right: 'dayGridMonth,timeGridWeek,timeGridDay,listWeek'
                },
                buttonText: {
                    today: 'Hoy',
                    month: 'Mes',
                    week: 'Semana',
                    day: 'Día',
                    list: 'Lista'
                },
                events: [...events],
                navLinks: true,
                selectable: true,
                selectMirror: true,
                dayMaxEvents: true,
            });
            calendar.render();
        });
    </script>

{% endblock %}



{% block content %}
    <div class="w-100 mb-4">
        <div class="d-flex justify-content-end">
            <form action="{% url 'dashboard_recepcion' %}" method="POST" class="row row-cols-lg-auto g-0 align-items-center" name="servicio" id="servicio">
                {% csrf_token %}
                <div class="col-12">
                    <select class="form-select" name="servicio" id="servicio">
                        <option value="" disabled selected>Seleccione un servicio</option>
                        {% for servicio in servicios %}
                            <option value="{{ servicio.nombre }}">{{ servicio.nombre }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="col-12">
                    <button class="btn btn-primary mt-2 mb-2" type="submit" name="servicio" id="servicio"><i class="fa-solid fa-magnifying-glass"></i></button>
                </div>
            </form>
        </div>
        <div class="d-flex justify-content-end">
            <form action="{% url 'dashboard_recepcion' %}" method="POST" class="row row-cols-lg-auto g-0 align-items-center" name="personal" id="personal">
                {% csrf_token %}
                <div class="col-12">
                    <select class="form-select" name="personal" id="personal">
                        <option value="" disabled selected>Seleccione un profesional</option>
                        {% for personal in profesionales %}
                            <option value="{{ personal.user.id }}">{{ personal.prefijo }} {{ personal.user.nombre }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="col-12">
                    <button class="btn btn-primary mt-2 mb-2" type="submit" name="personal" id="personal"><i class="fa-solid fa-magnifying-glass"></i></button>
                </div>
            </form>
        </div>

        <div class="w-100 d-flex justify-content-start align-items-center flex-row">
            <h1 class="text-start text-white">Dashboard Recepción</h1>
        </div>
    </div>

    <div class="m-0 p-3" style="background-color: white">
        <div id='calendar'></div>
    </div>
{% endblock %}

{% block scripts %}


{% endblock %}