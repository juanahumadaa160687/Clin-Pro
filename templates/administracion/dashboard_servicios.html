{% extends 'base_funcionarios.html' %}
{% load static %}

{% block title %} Dashboard Servicios {% endblock title %}



{% block content %}
    <div class="m-0 p-0" style="height: 100vh;">

        <div class="m-0 p-0" >
            <h1 class="text-start text-white">Dashboard Servicios</h1>
        </div>

        <div class="row d-flex flex-row justify-content-center mt-3 gap-2">

            <div class="col card" style="background-color: rgba(33, 38, 52, 0.9); border-radius: 20px; border: 2px solid #3b3f4c">
                <div class="card-body d-flex justify-content-center align-items-center">
                    <div class="chart-container w-100" style="position: relative; padding: 10px;">
                        <canvas id="paciente_servicios"></canvas>
                    </div>
                </div>
            </div>

            <div class="col flex-column p-0">

                <div class="col card mb-1" style="background-color: rgba(33, 38, 52, 0.9); border-radius: 20px; border: 2px solid #3b3f4c">
                    <div class="col card-body d-flex justify-content-center align-items-center">
                        <div class="chart-container w-100" style="position: relative; padding: 10px;">
                            <canvas id="ingresos"></canvas>
                        </div>
                    </div>
                </div>
                <div class="col card" style="background-color: rgba(33, 38, 52, 0.9); border-radius: 20px; border: 2px solid #3b3f4c">
                    <div class="col card-body d-flex justify-content-center align-items-center">
                        <div class="chart-container w-100" style="position: relative; padding: 10px;">
                            <canvas id="pacientes"></canvas>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row d-flex flex-row justify-content-center mt-2 gap-2">
                <div class="col card p-0" style="border-radius: 20px; border: 2px solid #3b3f4c">
                    <div class="card-body d-flex justify-content-center align-items-center">
                        <table class="display" id="tablaFunc" style="width: 100%;">
                            <thead>
                            <tr>
                                <th>RUT</th>
                                <th>Nombre</th>
                                <th>Teléfono</th>
                                <th>Email</th>
                                <th>Rol</th>
                                <th>Servicio</th>
                                <th>Acciones</th>
                            </tr>
                            </thead>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

{% endblock %}

{% block script %}

    <script src="https://code.jquery.com/jquery-3.7.1.js"></script>
    <script src="https://cdn.datatables.net/2.3.0/js/dataTables.js"></script>

    <script>

        let table = new DataTable('#tablaFunc',{
            data: [
                {'rut': '12.345.678-9', 'nombre': 'Juan Pérez', 'telefono': '+56912345678', 'email': 'jperez@clinicare.cl', 'rol': 'Personal Salud', 'servicio': 'Medicina Adulto', 'acciones': ''},
                {'rut': '98.765.432-1', 'nombre': 'María Gómez', 'telefono': '+56987654321', 'email': 'mgomez@clinicare.cl', 'rol': 'Secretaria', 'servicio': 'Odontología', 'acciones': ''},
                {'rut': '11.223.344-5', 'nombre': 'Carlos Ruiz', 'telefono': '+56911223344', 'email': 'cruiz@clinicare.cl', 'rol': 'Personal Salud', 'servicio': 'Vacunación', 'acciones': ''},
                {'rut': '22.334.455-6', 'nombre': 'Ana Torres', 'telefono': '+56922334455', 'email': 'storres@clinicare.cl', 'rol': 'Secretaria', 'servicio': 'Salud Mental', 'acciones': ''},
                {'rut': '33.445.566-7', 'nombre': 'Luis Fernández', 'telefono': '+56933445566', 'email': 'lfernandez@clinicare.cl', 'rol': 'Personal Salud', 'servicio': 'Nutrición', 'acciones': ''},
                {'rut': '44.556.677-8', 'nombre': 'Sofía Martínez', 'telefono': '+56944556677', 'email': 'smartinez@clinicare.cl', 'rol': 'Secretaria', 'servicio': 'Kinesiólogía', 'acciones': ''},
                {'rut': '55.667.788-9', 'nombre': 'Diego López', 'telefono': '+56955667788', 'email': 'dlopez@clinicare.cl', 'rol': 'Personal Salud', 'servicio': 'Terapia Ocupacional', 'acciones': ''},
                {'rut': '66.778.899-0', 'nombre': 'Elena Ramírez', 'telefono': '+56966778899', 'email': 'eramirez@clinicare.cl', 'rol': 'Secretaria', 'servicio': 'Fonoaudiología', 'acciones': ''},
                {'rut': '77.889.900-1', 'nombre': 'Javier Sánchez', 'telefono': '+56977889900', 'email': 'jsanchez@clinicare.cl', 'rol': 'Personal Salud', 'servicio': 'Medicina Niño', 'acciones': ''},
                {'rut': '88.990.011-2', 'nombre': 'Laura Díaz', 'telefono': '+56988990011', 'email': 'ldiaz@clinicare.cl', 'rol': 'Administrador', 'servicio': 'Odontología', 'acciones': ''},
                {'rut': '99.001.122-3', 'nombre': 'Miguel Torres', 'telefono': '+56999001122', 'email': 'mtorres@clinicare.cl', 'rol': 'Personal Salud', 'servicio': 'Vacunación', 'acciones': ''},
                {'rut': '10.112.233-4', 'nombre': 'Isabel Cruz', 'telefono': '+56910112233', 'email': 'icruz@clinicare.cl', 'rol': 'Administrador', 'servicio': 'Salud Mental', 'acciones': ''},
                {'rut': '21.223.344-5', 'nombre': 'Fernando Morales', 'telefono': '+56921223344', 'email': 'fmorales@clinicare.cl', 'rol': 'Personal Salud', 'servicio': 'Nutrición', 'acciones': ''},
                {'rut': '32.334.455-6', 'nombre': 'Carmen Vega', 'telefono': '+56932334455', 'email': 'cvega@clinicare.cl', 'rol': 'Administrador', 'servicio': 'Kinesiólogía', 'acciones': ''},
                {'rut': '43.445.566-7', 'nombre': 'Andrés Herrera', 'telefono': '+56943445566', 'email': 'aherrera@clinicare.cl', 'rol': 'Personal Salud', 'servicio': 'Terapia Ocupacional', 'acciones': ''},
                {'rut': '54.556.677-8', 'nombre': 'Patricia Soto', 'telefono': '+56954556677', 'email': 'psoto@clinicare.cl', 'rol': 'Administrador', 'servicio': 'Fonoaudiología', 'acciones': ''},
                {'rut': '65.667.788-9', 'nombre': 'Ricardo Fuentes', 'telefono': '+56965667788', 'email': 'rfuentes@clinicare.cl', 'rol': 'Personal Salud', 'servicio': 'Medicina Adulto', 'acciones': ''},
                {'rut': '76.778.899-0', 'nombre': 'Natalia Rojas', 'telefono': '+56976778899', 'email': 'nrojas@clinicare.cl', 'rol': 'Administrador', 'servicio': 'Medicina Adulto', 'acciones': ''},
            ],

            columns: [
                { data: 'rut' },
                { data: 'nombre' },
                { data: 'telefono' },
                { data: 'email' },
                { data: 'rol' },
                { data: 'servicio' },
                { data: 'acciones', defaultContent: '<a href="#" class="btn btn-primary btn-sm"><i class="fa-solid fa-pen-to-square"></i></a> <a href="#" class="btn btn-danger btn-sm"><i class="fa-solid fa-trash"></i></a>' }
            ],
        });
    </script>


    <script>

        const ctx2 = document.getElementById('paciente_servicios');
        const serviciosChart = new Chart(ctx2, {
            type: 'pie',
            data: {
                labels: ['Medicina Adulto', 'Medicina Niño', 'Odontología', 'Vacunación', 'Salud Mental', 'Nutrición', 'Kinesiólogía', 'Terapia Ocupacional'],
                datasets: [{
                    label: 'Pacientes Atendidos por Servicio',
                    data: [12324, 9321, 5321, 3210, 2134, 4321, 6543, 3210, 4321],
                    backgroundColor: [
                        'rgba(255, 99, 132, 0.2)',
                        'rgba(54, 162, 235, 0.2)',
                        'rgba(255, 206, 86, 0.2)',
                        'rgba(75, 192, 192, 0.2)',
                        'rgba(153, 102, 255, 0.2)',
                        'rgba(255, 159, 64, 0.2)',
                        'rgba(255, 99, 132, 0.2)',
                        'rgba(54, 162, 235, 0.2)',
                        'rgba(255, 206, 86, 0.2)',
                    ],
                    borderColor: [
                        'rgba(255, 99, 132, 1)',
                        'rgba(54, 162, 235, 1)',
                        'rgba(255, 206, 86, 1)',
                        'rgba(75, 192, 192, 1)',
                        'rgba(153, 102, 255, 1)',
                        'rgba(255, 159, 64, 1)',
                        'rgba(255, 99, 132, 1)',
                        'rgba(54, 162, 235, 1)',
                        'rgba(255, 206, 86, 1)',
                    ],
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        position: 'right', labels: {
                            color: '#fff' // Cambia el color del texto de la leyenda a blanco
                        }
                    },
                    title: {
                        display: true,
                        text: 'Pacientes Atendidos por Servicio',
                        color: '#fff',
                    }
                }
            }
        });
    </script>

    <script>

        const ctx = document.getElementById('ingresos');
        const ingresosChart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: ['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio', 'Julio', 'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre'],
                datasets: [{
                    label: 'Ingresos Mensuales por Servicios (en miles de CLP)',
                    data: [1200, 1900, 3000, 5000, 2000, 3000, 4500, 6000, 7000, 8000, 9000, 10000],
                    fill: true,
                    backgroundColor: 'rgba(75, 192, 192, 0.2)',
                    borderColor: 'rgba(75, 192, 192, 1)',
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        position: 'top', labels: {
                            color: '#fff' // Cambia el color del texto de la leyenda a blanco
                        }
                    },
                    title: {
                        display: true,
                        text: 'Ingresos Mensuales',
                        color: '#fff',
                    },
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        ticks: {
                            color: '#fff' // Cambia el color de los números del eje Y a blanco
                        }
                    },
                    x: {
                        ticks: {
                            color: '#fff' // Cambia el color de los números del eje X a blanco
                        }
                    }
                }
            }

        });
    </script>

    <script>

        const ctx3 = document.getElementById('pacientes');
        const pacientesChart = new Chart(ctx3, {
            type: 'line',
            data: {
                labels: ['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio', 'Julio', 'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre'],
                datasets: [{
                    label: 'Pacientes Mensuales',
                    data: [120, 190, 300, 500, 200, 300, 450, 600, 700, 800, 900, 1000],
                    fill: true,
                    backgroundColor: 'rgba(255, 99, 132, 0.2)',
                    borderColor: 'rgba(255, 99, 132, 1)',
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        position: 'top', labels: {
                            color: '#fff' // Cambia el color del texto de la leyenda a blanco
                        }
                    },
                    title: {
                        display: true,
                        text: 'Pacientes Mensuales',
                        color: '#fff',
                    },
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        ticks: {
                            color: '#fff' // Cambia el color de los números del eje Y a blanco
                        }
                    },
                    x: {
                        ticks: {
                            color: '#fff' // Cambia el color de los números del eje X a blanco
                        }
                    }
                }
            }

        });
    </script>

{% endblock script %}